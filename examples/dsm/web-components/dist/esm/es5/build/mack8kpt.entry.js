import{h}from"../myapp.core.js";function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var svgInjector=createCommonjsModule(function(t,e){!function(e,r){var n="file:"===e.location.protocol,i=r.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),o=Array.prototype.forEach||function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;r<n;++r)r in this&&t.call(e,this[r],r,this)},a={},l=0,s=[],u=[],c={},f=function(t){return t.cloneNode(!0)},p=function(t,e){u[t]=u[t]||[],u[t].push(e)},d=function(t,r,d,m){var g=t.getAttribute("data-src")||t.getAttribute("src");if(/\.svg/i.test(g))if(i)-1===s.indexOf(t)&&(s.push(t),t.setAttribute("src",""),function(t,r){if(void 0!==a[t])a[t]instanceof SVGSVGElement?r(f(a[t])):p(t,r);else{if(!e.XMLHttpRequest)return r("Browser does not support XMLHttpRequest"),!1;a[t]={},p(t,r);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(404===i.status||null===i.responseXML)return r("Unable to load SVG file: "+t),n&&r("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),r(),!1;if(!(200===i.status||n&&0===i.status))return r("There was a problem injecting the SVG: "+i.status+" "+i.statusText),!1;if(i.responseXML instanceof Document)a[t]=i.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{e=(new DOMParser).parseFromString(i.responseText,"text/xml")}catch(t){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return r("Unable to parse SVG file: "+t),!1;a[t]=e.documentElement}!function(t){for(var e=0,r=u[t].length;e<r;e++)!function(e){setTimeout(function(){u[t][e](f(a[t]))},0)}(e)}(t)}},i.open("GET",t),i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()}}(g,function(n){if(void 0===n||"string"==typeof n)return m(n),!1;var i=t.getAttribute("id");i&&n.setAttribute("id",i);var a=t.getAttribute("title");a&&n.setAttribute("title",a);var u=[].concat(n.getAttribute("class")||[],"injected-svg",t.getAttribute("class")||[]).join(" ");n.setAttribute("class",function(t){for(var e={},r=(t=t.split(" ")).length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}(u));var f=t.getAttribute("style");f&&n.setAttribute("style",f);var p=[].filter.call(t.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});o.call(p,function(t){t.name&&t.value&&n.setAttribute(t.name,t.value)});var d,h,v,y,b={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(b).forEach(function(t){h=b[t];for(var e=0,r=(d=n.querySelectorAll("defs "+t+"[id]")).length;e<r;e++){var i;y=(v=d[e].id)+"-"+l,o.call(h,function(t){for(var e=0,r=(i=n.querySelectorAll("["+t+'*="'+v+'"]')).length;e<r;e++)i[e].setAttribute(t,"url(#"+y+")")}),d[e].id=y}}),n.removeAttribute("xmlns:a");for(var w,A=n.querySelectorAll("script"),S=[],x=0,j=A.length;x<j;x++)(w=A[x].getAttribute("type"))&&"application/ecmascript"!==w&&"application/javascript"!==w||(S.push(A[x].innerText||A[x].textContent),n.removeChild(A[x]));if(S.length>0&&("always"===r||"once"===r&&!c[g])){for(var k=0,E=S.length;k<E;k++)new Function(S[k])(e);c[g]=!0}var M=n.querySelectorAll("style");o.call(M,function(t){t.textContent+=""}),t.parentNode.replaceChild(n,t),delete s[s.indexOf(t)],t=null,l++,m(n)}));else{var h=t.getAttribute("data-fallback")||t.getAttribute("data-png");h?(t.setAttribute("src",h),m(null)):d?(t.setAttribute("src",d+"/"+g.split("/").pop().replace(".svg",".png")),m(null)):m("This browser does not support SVG and no PNG fallback was defined.")}else m("Attempted to inject a file with a non-svg extension: "+g)};t.exports=function(t,e,r){var n=(e=e||{}).evalScripts||"always",i=e.pngFallback||!1,a=e.each;if(void 0!==t.length){var l=0;o.call(t,function(e){d(e,n,i,function(e){a&&"function"==typeof a&&a(e),r&&t.length===++l&&r(l)})})}else t?d(t,n,i,function(e){a&&"function"==typeof a&&a(e),r&&r(1),t=null}):r&&r(0)}}(window,document)}),SvgLoader=function(){function t(){}return t.prototype.updateImage=function(){if(this.imageElement){var t=new Image;for(t.src=this.url,t.style.fill=this.color;this.imageElement.firstChild;)this.imageElement.removeChild(this.imageElement.firstChild);this.imageElement.append(t),svgInjector(t)}},t.prototype.componentDidLoad=function(){this.updateImage()},t.prototype.componentDidUpdate=function(){this.updateImage()},t.prototype.render=function(){var t=this;return h("div",{ref:function(e){return t.imageElement=e}})},Object.defineProperty(t,"is",{get:function(){return"svg-loader"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{color:{type:String,attr:"color"},url:{type:String,attr:"url"}}},enumerable:!0,configurable:!0}),t}();export{SvgLoader};